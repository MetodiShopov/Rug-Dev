{% comment %}
  @param product {Object}
    The product object

  @param gallery_thumbnails {Boolean}
    If true, show product thumbnails

  @param gallery_thumbnail_slider {Boolean}
    If true, activate thumbnail slider

  @param gallery_click_to_zoom {Boolean}
    If true, enable product lightbox

  @param gallery_hover_zoom {Boolean}
    If true, magnify product images on hover

  @param gallery_arrows {Boolean}
    If true, display slideshow arrows

  @param set_product_height {Boolean}
    If true, set product media height

  @param gallery_slideshow_transition {String}
    Slideshow transition, which is either 'slide' or 'fade'

  @param gallery_slideshow_speed {Number}
    The slideshow speed, which is a range between '0' and '6'

  @param gallery_thumbnail_position {String}
    Thumbnail position, which is either 'below main image', 'left of main image', or 'right of main image'

  @param video_looping {Boolean}
    If true, loop videos
{% endcomment %}

{% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
{% capture list %}
  {% for image in product.images %}
    {% comment %}Loop through images only once{% endcomment %}
    {{ image.id }}`~`{{ image.alt }}`~`{{ image | img_url: '100x' }}`~`{{ image | img_url: '200x' }}`~`{{ image | img_url: '400x' }}`~`{{ image | img_url: '600x' }}`~`{{ image | img_url: '800x' }}`~`{{ image | img_url: '1200x' }}`~`{{ image | img_url: '2000x' }}`~`{{-image.width-}}px`~`{{-image.height-}}px{{ image | product_img_url: '5000x' }}{% if forloop.last == false %}^{% endif %}
  {% endfor %}
{% endcapture %}
{% assign image_list = list | split: "^" %}

{% style %}
.shopify-model-viewer-ui model-viewer {
  --progress-bar-height: 2px;
  --progress-bar-color: {{ settings.regular_color }};
}
{% endstyle %}

<div class="gallery-wrap
            gallery-arrows--{{ gallery_arrows }}
            {% if set_product_height != blank %}product-height-set{% endif %}
            gallery-thumbnails--{{ gallery_thumbnail_position }}">
  <div class="product_gallery
              js-product-gallery product-{{ product.id }}-gallery
              transparentBackground--{{ settings.slideshow_button_style }}
              slideshow-transition--{{ gallery_slideshow_transition }}
              popup-enabled--{{ gallery_click_to_zoom }}
              show-gallery-arrows--{{ gallery_arrows }}
              {% if product.media.size > 1 %} multi-image {% else %} single-image {% endif %}"
              data-thumbnails-enabled="{{ gallery_thumbnails }}"
              data-gallery-arrows-enabled="{{ gallery_arrows }}"
              data-slideshow-speed="{{ gallery_slideshow_speed }}"
              data-thumbnails-position="{{ gallery_thumbnail_position }}"
              data-thumbnails-slider-enabled="{{ gallery_thumbnail_slider }}"
              data-zoom="{{ gallery_hover_zoom }}"
              data-video-loop="{{ video_looping }}"
              data-product-id="{{ product.id }}"
              data-product-lightbox="{{ gallery_click_to_zoom }}"
              data-media-count="{{ product.media.size }}"
              data-product-gallery>
    {% for media in product.media %}
      <div class="gallery-cell" data-product-id="{{ product.id }}" data-media-type="{% if media.alt contains 'youtube' or media.alt contains 'vimeo' %}external_video{% else %}{{ media.media_type }}{% endif %}" data-thumb="{{ image_large }}" data-title="{% if image_alt contains 'youtube' or image_alt contains 'vimeo' %}{{ product.title | escape }}{% else %}{{ image_alt | escape }}{% endif %}">
        {% case media.media_type %}
          {% when 'image' %}

            {% capture image_id %}{{ media.id }}{% endcapture %}
            {% capture image_alt %}{{ media.alt | escape }}{% endcapture %}
            {% capture image_100x %}{{ media | img_url: '100x' }}{% endcapture %}
            {% capture image_200x %}{{ media | img_url: '200x' }}{% endcapture %}
            {% capture image_400x %}{{ media | img_url: '400x' }}{% endcapture %}
            {% capture image_600x %}{{ media | img_url: '600x' }}{% endcapture %}
            {% capture image_800x %}{{ media | img_url: '800x' }}{% endcapture %}
            {% capture image_1200x %}{{ media | img_url: '1200x' }}{% endcapture %}
            {% capture image_2000x %}{{ media | img_url: '2000x' }}{% endcapture %}
            {% capture image_5000x %}{{ media | img_url: '5000x' }}{% endcapture %}

            {% if image_alt contains 'youtube' or image_alt contains 'vimeo' %}

              {% assign alt_text = image_alt | split: ' ' %}
                {% for property in alt_text %}
                  {% if property contains "src" %}
                    {% assign cleanURL =  property | remove: 'src=' | remove: '&quot;' | remove: '"' %}
                    <div class="product-gallery__video" data-youtube-video>
                      <iframe src="{{ cleanURL }}" frameborder="0"></iframe>
                    </div>
                  {% endif %}
                {% endfor %}

            {% else %}

              {% if gallery_click_to_zoom and product.images.size > 0 %}
                <a  href="{{ image_5000x }}"
                    class="lightbox"
                    data-fancybox="{{ product.id }}"
                    rel="product-lightbox"
                    tabindex="-1">
              {% endif %}
              <div class="image__container" style="max-width: {{ media.width }}px">
                {% if product.images.size > 0 %}
                  {%- liquid
                    assign lazyload = true
                    if section.index0 < 2 and forloop.first
                      assign lazyload = false
                    endif
                  -%}
                  {%- capture srcset -%}
                    {{ media | img_url: '2000x' }} 2000w,
                    {{ media | img_url: '1200x' }} 1200w,
                    {{ media | img_url: '800x' }} 800w,
                    {{ media | img_url: '600x' }} 600w,
                    {{ media | img_url: '400x' }} 400w,
                    {{ media | img_url: '200x' }} 200w
                  {%- endcapture -%}
                  {%- if lazyload -%}
                    <img
                      data-zoom-src="{{ image_5000x }}"
                      alt="{{ image_alt }}"
                      class="
                        product-gallery__image
                        lazyload
                        {{ settings.image_loading_style }}
                      "
                      data-image-id="{{ product.media[forloop.index0].id }}"
                      data-index="{{ forloop.index0 }}"
                      data-sizes="{% if gallery_click_to_zoom %}100vw{% else %}auto{% endif %}"
                      data-aspectratio="{{ media.width }}/{{ media.height }}"
                      data-src="{{ media | img_url: '1200x' }}"
                      data-srcset="{{ srcset }}"
                      height="{{ media.height }}"
                      width="{{ media.width }}"
                      srcset="data:image/svg+xml;utf8,<svg%20xmlns='http://www.w3.org/2000/svg'%20width='{{ media.width }}'%20height='{{ media.height }}'></svg>"
                    />
                  {%- else -%}
                    {{
                      media
                      | image_url: width: 1200
                      | image_tag:
                        loading: 'eager',
                        class: 'product-gallery__image',
                        alt: image_alt,
                        width: media.width,
                        height: media.height,
                        srcset: srcset,
                        data-image-id: product.media[forloop.index0].id,
                        data-index: forloop.index0,
                        data-zoom-src: image_5000x
                    }}
                  {%- endif -%}
                {% else %}
                  <img src="{{ image | img_url: 'master' }}" />
                {% endif %}
              </div>
              {% if gallery_click_to_zoom and product.images.size > 0 %}
                </a>
              {% endif %}
            {% endif %}
          {% when 'external_video' %}
            <div class="product-gallery__video" data-youtube-video>
              {{ media | external_video_tag }}
            </div>
          {% when 'video' %}
            <div class="product-gallery__video" data-html5-video>
              {{ media | video_tag: controls: true }}
            </div>
          {% when 'model' %}
            <div class="product-gallery__model">
              {{ media | model_viewer_tag: reveal: 'interaction', toggleable: true,  image_size: '800x800' }}

              <button class="view-in-your-space" data-shopify-xr data-shopify-model3d-id="{% if media.media_type == 'model' %}{{ media.id }}{% else %}{{ has_model.id }}{% endif %}" data-shopify-title={{ product.title | escape }} style="display: none;">
                <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M16 9L22.0622 12.5V19.5L16 23L9.93782 19.5V12.5L16 9Z" stroke="#3A3A3A" stroke-width="1.5"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M16 23V15.6024C16.6225 15.2002 16.6225 15.2002 16.6225 15.2002L22 12V19.4082L16 23Z" fill="#3A3A3A"/>
                </svg>
                {{ 'products.product.view_in_your_space' | t | capitalize }}
              </button>
            </div>
          {% else %}
            {{ media | media_tag }}
        {% endcase %}
      </div>
    {% endfor %}
  </div>

  {% if gallery_thumbnails == true %}
    {% if image_width != 'full' %}
      <div class="
            product_gallery_nav
            {% unless gallery_thumbnail_slider %}
              product_gallery_nav--slider-enabled
            {% endunless %}
            product-gallery__thumbnails
            product_gallery_nav--{{ thumbnail_position }}
            product-{{ product.id }}-gallery-nav
          "
        >
      {% if product.media.size > 1 %}
        {% for media in product.media %}
          {% if media.media_type contains 'video' %}
            {% assign thumbnail_badge = 'video-thumbnail' %}
          {% elsif media.media_type contains 'model' %}
            {% assign thumbnail_badge = '3d-thumbnail' %}
          {% else %}
            {% assign thumbnail_badge = '' %}
          {% endif %}

          <div tabindex="0" class="gallery-cell product-gallery__thumbnail" data-title="{{ media.alt | escape }}">
            {%
              render 'image-element',
              image: media,
              alt: media.alt,
            %}
            {% if thumbnail_badge == 'video-thumbnail' %}
              <svg class="media-badge" width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 25H25V1H1V25Z" fill="white"/><path class="media-badge__outline" d="M0.5 25V25.5H1H25H25.5V25V1V0.5H25H1H0.5V1V25Z" stroke="black" stroke-opacity="0.05"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.19995 5.8V20.2L19.3999 12.5858L8.19995 5.8Z" fill="#3A3A3A" fill-opacity="0.6"/></svg>
            {% elsif thumbnail_badge == '3d-thumbnail' %}
              <svg class="media-badge" width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 25H25V1H1V25Z" fill="white"/><path class="media-badge__outline" d="M0.5 25V25.5H1H25H25.5V25V1V0.5H25H1H0.5V1V25Z" stroke="black" stroke-opacity="0.05"/><g opacity="0.6"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 6L19.0622 9.5V16.5L13 20L6.93782 16.5V9.5L13 6Z" stroke="#3A3A3A" stroke-width="1.5"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13 20V12.6024C13.6225 12.2002 13.6225 12.2002 13.6225 12.2002L19 9V16.4082L13 20Z" fill="#3A3A3A"/></g></svg>
            {% endif %}
          </div>
        {% endfor %}
      {% endif %}
      </div>
    {% endif %}
  {% endif %}
  <div id="main_thumb_message" style="display: none;">
    <div class="ctm_prd_main_thum">
      <div class="main_thum_item_1">4K IMAGE QUALITY</div>
      <div class="main_thum_item_2">
        <img src="{{ 'pr_main_thumb.png' |  asset_url }}" class="prd_main_stain" alt="STAIN RESISTANT"  width="20px" height="20px"/> 
        <span>STAIN RESISTANT</span>
      </div>
    </div>
  </div>
</div>

<style>
  .aded_head {
    text-align: center;
    font-size: 24px;
    font-weight: 700;
    line-height: normal;
    margin-bottom: 16px;
  }
  .manyImg_wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    padding: 0 16px;
  }
  .manyImg_item {
    max-height: 72px;
  }
</style>
<div class="aded_head">Trusted by 10,000+ Businesses and Fans</div>
<div class="manyImg_wrapper">
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/3d09b282d0dfc371dc57859aa404f4c50127c22d_1_d1567012-09f5-4c45-a594-352dd3f7852f.png" alt="Logo 1" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/ea59227e2824e4cca5da6436df743ecf97e23034_1_10e55c46-d461-40ab-be95-f7303c4ea559.png" alt="Logo 2" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/301e617d39210c32b4577a0844002ce9089d8120_1_9c4cc32c-c822-4110-b384-5cf46a4b97eb.png" alt="Logo 3" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/11296c63744c830c40b748623a17ef2779114fa6_1_9be3882f-79f6-405e-8c89-a3f6c428d787.png" alt="Logo 4" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/bdb67cdcd7a8da04421b9d683c7b4ffe348d7421_1_6a0b2fbe-c780-4cee-a1de-d29d75690490.png" alt="Logo 5" width="72px" height="72px"/>
  </div>
   <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/74fd17074ebc7ee30fd9fcc5eb1996d4dddaf766_1.png" alt="Logo 6" width="72px" height="72px"/>
  </div>
   <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/7eecc99920eb4a7179b1db49da1e6fd2933b2580_1_b43f4706-14a0-43b0-8c82-784280c8b44a.png" alt="Logo 7" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/2f5b9cb69a452731c364f25d02fb3e36500f813c_1_1_088b7417-565c-460c-96c7-2ecabea4a800.png" alt="Logo 1" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/c2333c4315bb2488bfe6e791b49640a00d89ae0e_1.png" alt="Logo 2" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/6831a68ac4bc310292c1625763799fd47fe54725_1_b37b2670-a975-407f-9cb4-06c4202ec1a9.png" alt="Logo 3" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/5c49c83c0dcdce66934e8b243d29edbf29d613bf_1.png" alt="Logo 4" width="72px" height="72px"/>
  </div>
  <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/9d9bef12cc2d922121b7fb2390ffd67e50e0cfd3_1_dfefe2ce-3e46-498b-97bd-1d74336ff723.png" alt="Logo 5" width="72px" height="72px"/>
  </div>
   <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/ab507baffa4f7429042504e35ed98c40cc070969_1_1_e0aa7e18-a672-4fe6-93ad-6663bf80d82d.png" alt="Logo 6" width="72px" height="72px"/>
  </div>
   <div class="manyImg_item">
    <img src="https://cdn.shopify.com/s/files/1/0766/1840/0065/files/db29a2734e42c08e4eeed5f9a2b6b7df6dccef06_1_651083ae-ea06-437f-81a3-e86b35c7115f.png" alt="Logo 7" width="72px" height="72px"/>
  </div>
</div>